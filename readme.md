# HQL编辑器

## 概述

本项目基于Ace Editor实现了一个简单的HQL语言编辑器。

## 运行

首先运行`npm install` 安装相关依赖，接下来运行`npm start`启动项目。

在根目录下`roadhogrc.mock.js`中mock了表的字段信息，可以进行修改，或者在`src/App.tsx`中第20行修改获取字段信息的地址，定位至后端服务器。

## 实现原理

在`src/hql.js`下实现了Ace Editor的mode，并实现highlight rules与completions以进行代码高亮与自动补全。
Ace Editor会用带有特定class的span包裹文本，在`public/global.css`中设置对应的样式即可将代码着为希望的颜色。

## 存在的问题与改进

本作业只实现了词法分析而未实现语法分析，因此仅仅将源代码分解为若干Token而没有考虑到这些Token的顺序关系（例如与或非可以任意并置），不能实现代码自动纠错。
要改进这一点需引入语法分析器，根据语法分析的结果实现错误提示。

Ace Editor内置的词法分析结果似乎不能直接引入语法分析中，并且在代码高亮部分只能使用内置词法分析的结果，无法联合语法分析实现更加精确的高亮，这可能是Ace Editor的一些缺憾。

若完全自己实现代码高亮及自动补全的编辑器，可以考虑从`draft.js`出发，它是一个React生态圈中的富文本编辑器开发框架，结合一些词法分析与语法分析的开源js库完成需求。
